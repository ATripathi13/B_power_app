{% extends 'base.html' %}
{% load static %}

{% block title %}Buyer Registration - MSME Marketplace{% endblock %}

{% block extra_css %}
<style>
    .form-section {
        background-color: #f8f9fa;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        border-left: 4px solid #17a2b8;
    }
    .form-section h5 {
        color: #17a2b8;
        margin-bottom: 15px;
    }
    .required::after {
        content: " *";
        color: red;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0"><i class="fas fa-shopping-cart"></i> Buyer Registration</h4>
                    <p class="mb-0">Join our marketplace and access thousands of products!</p>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        
                        {% if form.non_field_errors %}
                            <div class="alert alert-danger">
                                {{ form.non_field_errors }}
                            </div>
                        {% endif %}
                        
                        <!-- User Account Information -->
                        <div class="form-section">
                            <h5><i class="fas fa-user-circle"></i> Account Information</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.username.id_for_label }}" class="form-label required">Username</label>
                                        <input type="text" 
                                               class="form-control {% if form.username.errors %}is-invalid{% endif %}" 
                                               id="{{ form.username.id_for_label }}" 
                                               name="{{ form.username.name }}" 
                                               value="{{ form.username.value|default:'' }}" 
                                               required>
                                        {% if form.username.errors %}
                                            <div class="invalid-feedback">{{ form.username.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.email.id_for_label }}" class="form-label required">Email</label>
                                        <input type="email" 
                                               class="form-control {% if form.email.errors %}is-invalid{% endif %}" 
                                               id="{{ form.email.id_for_label }}" 
                                               name="{{ form.email.name }}" 
                                               value="{{ form.email.value|default:'' }}" 
                                               required>
                                        {% if form.email.errors %}
                                            <div class="invalid-feedback">{{ form.email.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.password1.id_for_label }}" class="form-label required">Password</label>
                                        <input type="password" 
                                               class="form-control {% if form.password1.errors %}is-invalid{% endif %}" 
                                               id="{{ form.password1.id_for_label }}" 
                                               name="{{ form.password1.name }}" 
                                               required>
                                        {% if form.password1.errors %}
                                            <div class="invalid-feedback">{{ form.password1.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.password2.id_for_label }}" class="form-label required">Confirm Password</label>
                                        <input type="password" 
                                               class="form-control {% if form.password2.errors %}is-invalid{% endif %}" 
                                               id="{{ form.password2.id_for_label }}" 
                                               name="{{ form.password2.name }}" 
                                               required>
                                        {% if form.password2.errors %}
                                            <div class="invalid-feedback">{{ form.password2.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Personal Information -->
                        <div class="form-section">
                            <h5><i class="fas fa-user"></i> Personal Information</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.name.id_for_label }}" class="form-label required">Full Name</label>
                                        <input type="text" 
                                               class="form-control {% if form.name.errors %}is-invalid{% endif %}" 
                                               id="{{ form.name.id_for_label }}" 
                                               name="{{ form.name.name }}" 
                                               value="{{ form.name.value|default:'' }}" 
                                               required>
                                        {% if form.name.errors %}
                                            <div class="invalid-feedback">{{ form.name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.business_name.id_for_label }}" class="form-label">Business Name (Optional)</label>
                                        <input type="text" 
                                               class="form-control {% if form.business_name.errors %}is-invalid{% endif %}" 
                                               id="{{ form.business_name.id_for_label }}" 
                                               name="{{ form.business_name.name }}" 
                                               value="{{ form.business_name.value|default:'' }}" 
                                               placeholder="Leave blank if purchasing as individual">
                                        {% if form.business_name.errors %}
                                            <div class="invalid-feedback">{{ form.business_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.mobile_number.id_for_label }}" class="form-label required">Mobile Number</label>
                                        <input type="tel" 
                                               class="form-control {% if form.mobile_number.errors %}is-invalid{% endif %}" 
                                               id="{{ form.mobile_number.id_for_label }}" 
                                               name="{{ form.mobile_number.name }}" 
                                               value="{{ form.mobile_number.value|default:'' }}" 
                                               placeholder="+91-9876543210"
                                               required>
                                        {% if form.mobile_number.errors %}
                                            <div class="invalid-feedback">{{ form.mobile_number.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.gstin.id_for_label }}" class="form-label required">GSTIN Number</label>
                                        <input type="text" 
                                               class="form-control {% if form.gstin.errors %}is-invalid{% endif %}" 
                                               id="{{ form.gstin.id_for_label }}" 
                                               name="{{ form.gstin.name }}" 
                                               value="{{ form.gstin.value|default:'' }}" 
                                               placeholder="15-digit GSTIN number"
                                               required>
                                        {% if form.gstin.errors %}
                                            <div class="invalid-feedback">{{ form.gstin.errors.0 }}</div>
                                        {% endif %}
                                        <small class="form-text text-muted">Format: 27AABCT1332L1ZA</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.address.id_for_label }}" class="form-label required">Address</label>
                                <textarea class="form-control {% if form.address.errors %}is-invalid{% endif %}" 
                                          id="{{ form.address.id_for_label }}" 
                                          name="{{ form.address.name }}" 
                                          rows="3" 
                                          placeholder="Enter complete address"
                                          required>{{ form.address.value|default:'' }}</textarea>
                                {% if form.address.errors %}
                                    <div class="invalid-feedback">{{ form.address.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <!-- Bank Details (Optional) -->
                        <div class="form-section">
                            <h5><i class="fas fa-university"></i> Bank Details (Optional)</h5>
                            <p class="text-muted small">Provide bank details to enable credit balance features</p>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.bank_name.id_for_label }}" class="form-label">Bank Name</label>
                                        <input type="text" 
                                               class="form-control {% if form.bank_name.errors %}is-invalid{% endif %}" 
                                               id="{{ form.bank_name.id_for_label }}" 
                                               name="{{ form.bank_name.name }}" 
                                               value="{{ form.bank_name.value|default:'' }}" 
                                               placeholder="State Bank of India">
                                        {% if form.bank_name.errors %}
                                            <div class="invalid-feedback">{{ form.bank_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="{{ form.ifsc_code.id_for_label }}" class="form-label">IFSC Code</label>
                                        <input type="text" 
                                               class="form-control {% if form.ifsc_code.errors %}is-invalid{% endif %}" 
                                               id="{{ form.ifsc_code.id_for_label }}" 
                                               name="{{ form.ifsc_code.name }}" 
                                               value="{{ form.ifsc_code.value|default:'' }}" 
                                               placeholder="SBIN0001234">
                                        {% if form.ifsc_code.errors %}
                                            <div class="invalid-feedback">{{ form.ifsc_code.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.account_number.id_for_label }}" class="form-label">Account Number</label>
                                <input type="text" 
                                       class="form-control {% if form.account_number.errors %}is-invalid{% endif %}" 
                                       id="{{ form.account_number.id_for_label }}" 
                                       name="{{ form.account_number.name }}" 
                                       value="{{ form.account_number.value|default:'' }}" 
                                       placeholder="Enter account number">
                                {% if form.account_number.errors %}
                                    <div class="invalid-feedback">{{ form.account_number.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button type="submit" class="btn btn-info btn-lg px-5">
                                <i class="fas fa-user-plus"></i> Register as Buyer
                            </button>
                        </div>
                        
                        <div class="text-center mt-3">
                            <p>Already have an account? <a href="{% url 'marketplace:login' %}">Login here</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
